<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArchiDesign - Ã‰diteur de Plans Professionnel</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo">ğŸ›ï¸ ArchiDesign</div>
        <div class="project-info">
            <input type="text" id="projectName" placeholder="Nom du projet" value="Mon Plan">
            <span class="save-status" id="saveStatus">ğŸ’¾ PrÃªt</span>
        </div>
        <div class="user-info">
            <span>Mode Professionnel</span>
            <div class="version-info">v2.0</div>
        </div>
    </div>

    <div class="main-container">
        <!-- Barre d'outils complÃ¨te -->
        <div class="toolbar">
            <div class="tool-section">
                <h3>ğŸ¯ Outils de base</h3>
                <div class="tool-grid">
                    <button class="tool-btn active" data-tool="select" title="SÃ©lection (1)">
                        <span class="tool-icon">âœ‹</span>
                        <span>SÃ©lection</span>
                    </button>
                    <button class="tool-btn" data-tool="eraser" title="Gomme (E)">
                        <span class="tool-icon">ğŸ§½</span>
                        <span>Gomme</span>
                    </button>
                    <button class="tool-btn" data-tool="hand" title="DÃ©placement vue (H)">
                        <span class="tool-icon">ğŸ‘‹</span>
                        <span>DÃ©placer</span>
                    </button>
                    <button class="tool-btn" data-tool="measure" title="Mesure (M)">
                        <span class="tool-icon">ğŸ“</span>
                        <span>Mesurer</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ—ï¸ Structure</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="wall" title="Mur (2)">
                        <span class="tool-icon">ğŸ§±</span>
                        <span>Mur</span>
                    </button>
                    <button class="tool-btn" data-tool="voile" title="Voile bÃ©ton">
                        <span class="tool-icon">ğŸ—ï¸</span>
                        <span>Voile</span>
                    </button>
                    <button class="tool-btn" data-tool="column" title="Poteau">
                        <span class="tool-icon">ğŸ›ï¸</span>
                        <span>Poteau</span>
                    </button>
                    <button class="tool-btn" data-tool="beam" title="Poutre">
                        <span class="tool-icon">â–</span>
                        <span>Poutre</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸšª Ouvertures</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="door" title="Porte (3)">
                        <span class="tool-icon">ğŸšª</span>
                        <span>Porte</span>
                    </button>
                    <button class="tool-btn" data-tool="window" title="FenÃªtre (4)">
                        <span class="tool-icon">ğŸªŸ</span>
                        <span>FenÃªtre</span>
                    </button>
                    <button class="tool-btn" data-tool="french-door" title="Porte-fenÃªtre">
                        <span class="tool-icon">ğŸšª</span>
                        <span>P.FenÃªtre</span>
                    </button>
                    <button class="tool-btn" data-tool="bay-window" title="Baie vitrÃ©e">
                        <span class="tool-icon">ğŸªŸ</span>
                        <span>Baie</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸªœ Circulation</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="stairs" title="Escalier">
                        <span class="tool-icon">ğŸªœ</span>
                        <span>Escalier</span>
                    </button>
                    <button class="tool-btn" data-tool="elevator" title="Ascenseur">
                        <span class="tool-icon">ğŸ›—</span>
                        <span>Ascenseur</span>
                    </button>
                    <button class="tool-btn" data-tool="ramp" title="Rampe">
                        <span class="tool-icon">ğŸ“</span>
                        <span>Rampe</span>
                    </button>
                    <button class="tool-btn" data-tool="balcony" title="Balcon">
                        <span class="tool-icon">ğŸ </span>
                        <span>Balcon</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ”§ Techniques</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="gaine" title="Gaine technique">
                        <span class="tool-icon">ğŸ”Œ</span>
                        <span>Gaine</span>
                    </button>
                    <button class="tool-btn" data-tool="tech-space" title="Local technique">
                        <span class="tool-icon">âš™ï¸</span>
                        <span>L.Technique</span>
                    </button>
                    <button class="tool-btn" data-tool="hvac" title="CVC">
                        <span class="tool-icon">ğŸŒ¡ï¸</span>
                        <span>CVC</span>
                    </button>
                    <button class="tool-btn" data-tool="electrical" title="Ã‰lectrique">
                        <span class="tool-icon">âš¡</span>
                        <span>Ã‰lectrique</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ“ GÃ©omÃ©trie</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="rectangle" title="Rectangle (5)">
                        <span class="tool-icon">â–­</span>
                        <span>Rectangle</span>
                    </button>
                    <button class="tool-btn" data-tool="circle" title="Cercle (6)">
                        <span class="tool-icon">â­•</span>
                        <span>Cercle</span>
                    </button>
                    <button class="tool-btn" data-tool="line" title="Ligne (L)">
                        <span class="tool-icon">â–</span>
                        <span>Ligne</span>
                    </button>
                    <button class="tool-btn" data-tool="polygon" title="Polygone">
                        <span class="tool-icon">â¬Ÿ</span>
                        <span>Polygone</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ“ Annotation</h3>
                <div class="tool-grid">
                    <button class="tool-btn" data-tool="text" title="Texte (T)">
                        <span class="tool-icon">ğŸ“</span>
                        <span>Texte</span>
                    </button>
                    <button class="tool-btn" data-tool="dimension" title="Cotation">
                        <span class="tool-icon">ğŸ“</span>
                        <span>Cotation</span>
                    </button>
                    <button class="tool-btn" data-tool="arrow" title="FlÃ¨che">
                        <span class="tool-icon">ğŸ¹</span>
                        <span>FlÃ¨che</span>
                    </button>
                    <button class="tool-btn" data-tool="label" title="Ã‰tiquette">
                        <span class="tool-icon">ğŸ·ï¸</span>
                        <span>Ã‰tiquette</span>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ¨ PropriÃ©tÃ©s</h3>
                <div class="properties-panel">
                    <div class="prop-row">
                        <label>Couleur trait:</label>
                        <input type="color" id="strokeColor" value="#333333">
                    </div>
                    <div class="prop-row">
                        <label>Couleur remplissage:</label>
                        <input type="color" id="fillColor" value="#ffffff">
                    </div>
                    <div class="prop-row">
                        <label>Ã‰paisseur:</label>
                        <input type="range" id="strokeWidth" min="1" max="20" value="2">
                        <span id="strokeValue">2</span>
                    </div>
                    <div class="prop-row">
                        <label>OpacitÃ©:</label>
                        <input type="range" id="opacity" min="0.1" max="1" step="0.1" value="1">
                        <span id="opacityValue">100%</span>
                    </div>
                    <div class="prop-row">
                        <label>Style trait:</label>
                        <select id="strokeStyle">
                            <option value="solid">Continu</option>
                            <option value="dashed">Tirets</option>
                            <option value="dotted">PointillÃ©s</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="tool-section">
                <h3>âš™ï¸ ParamÃ¨tres</h3>
                <div class="settings-panel">
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="gridToggle" checked>
                            Afficher la grille
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="snapToggle" checked>
                            Accrochage grille
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="snapObjects" checked>
                            Accrochage objets
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="autoSelectToggle" checked>
                            Retour sÃ©lection auto
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showDimensions">
                            Afficher dimensions
                        </label>
                    </div>
                    <div class="prop-row">
                        <label>Zoom:</label>
                        <input type="range" id="zoomSlider" min="0.2" max="5" step="0.1" value="1">
                        <span id="zoomValue">100%</span>
                    </div>
                    <div class="prop-row">
                        <label>Grille (cm):</label>
                        <input type="range" id="gridSize" min="5" max="100" step="5" value="20">
                        <span id="gridSizeValue">20</span>
                    </div>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ“‹ Actions</h3>
                <div class="action-buttons">
                    <button class="action-btn" id="undoBtn" title="Ctrl+Z">â†¶ Annuler</button>
                    <button class="action-btn" id="redoBtn" title="Ctrl+Y">â†· Refaire</button>
                    <button class="action-btn" id="copyBtn" title="Ctrl+C">ğŸ“‹ Copier</button>
                    <button class="action-btn" id="pasteBtn" title="Ctrl+V">ğŸ“„ Coller</button>
                    <button class="action-btn" id="duplicateBtn" title="Ctrl+D">ğŸ”„ Dupliquer</button>
                    <button class="action-btn" id="groupBtn" title="Ctrl+G">ğŸ—‚ï¸ Grouper</button>
                    <button class="action-btn" id="clearBtn">ğŸ—‘ï¸ Effacer</button>
                    <button class="action-btn" id="saveBtn" title="Ctrl+S">ğŸ’¾ Sauvegarder</button>
                    <button class="action-btn" id="loadBtn" title="Ctrl+O">ğŸ“ Charger</button>
                    <button class="action-btn" id="exportBtn">ğŸ“¸ Exporter</button>
                    <button class="action-btn" id="printBtn" title="Ctrl+P">ğŸ–¨ï¸ Imprimer</button>
                    <button class="action-btn" id="fullscreenBtn">ğŸ” Plein Ã©cran</button>
                </div>
            </div>

            <div class="tool-section">
                <h3>ğŸ“Š Informations</h3>
                <div class="info-panel">
                    <div class="info-item">
                        <span class="info-label">Projet:</span>
                        <span id="projectStatus">Nouveau</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Objets:</span>
                        <span id="objectCount">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">SÃ©lection:</span>
                        <span id="selectionCount">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Historique:</span>
                        <span id="historyCount">1</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Zone de dessin -->
        <div class="canvas-area">
            <div class="canvas-toolbar">
                <div class="canvas-controls">
                    <button class="control-btn" id="zoomInBtn" title="Zoom +">ğŸ”+</button>
                    <button class="control-btn" id="zoomOutBtn" title="Zoom -">ğŸ”-</button>
                    <button class="control-btn" id="zoomFitBtn" title="Ajuster">ğŸ“</button>
                    <button class="control-btn" id="zoom100Btn" title="100%">1:1</button>
                </div>
                <div class="canvas-info">
                    <span id="cursorPos">Position: X: 0, Y: 0</span>
                    <span id="selection">Aucune sÃ©lection</span>
                    <span id="canvasScale">Ã‰chelle: 1:100</span>
                </div>
                <div class="layer-controls">
                    <button class="control-btn" id="layerBtn" title="Calques">ğŸ“„</button>
                    <button class="control-btn" id="gridBtn" title="Grille">âŠ</button>
                    <button class="control-btn" id="rulerBtn" title="RÃ¨gles">ğŸ“</button>
                </div>
            </div>
            
            <div class="canvas-wrapper">
                <div class="rulers" id="rulers" style="display: none;">
                    <div class="ruler-horizontal" id="rulerHorizontal"></div>
                    <div class="ruler-vertical" id="rulerVertical"></div>
                </div>
                <canvas id="canvas" width="1200" height="800"></canvas>
                <div class="canvas-overlay" id="canvasOverlay"></div>
            </div>
        </div>
    </div>

    <!-- Barre de statut -->
    <div class="status-bar">
        <div class="status-left">
            <span id="objectCount">Objets: 0</span>
            <span id="selectionInfo">Aucune sÃ©lection</span>
            <span id="toolInfo">Outil: SÃ©lection</span>
        </div>
        <div class="status-center">
            <span id="canvasInfo">1200 Ã— 800 px</span>
            <span id="scaleInfo">Ã‰chelle: 1:100</span>
        </div>
        <div class="status-right">
            <span id="zoomInfo">Zoom: 100%</span>
            <span id="gridInfo">Grille: 20cm</span>
            <span id="memoryInfo">MÃ©moire: 0MB</span>
        </div>
    </div>

    <!-- Panneaux modaux -->
    <div class="modal-overlay" id="modalOverlay" style="display: none;">
        <div class="modal" id="layerPanel">
            <div class="modal-header">
                <h3>ğŸ“„ Gestion des calques</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="layer-list" id="layerList">
                    <!-- Les calques seront ajoutÃ©s dynamiquement -->
                </div>
                <div class="layer-actions">
                    <button class="action-btn" id="addLayerBtn">+ Nouveau calque</button>
                    <button class="action-btn" id="deleteLayerBtn">ğŸ—‘ï¸ Supprimer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu contextuel -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <div class="context-item" data-action="copy">ğŸ“‹ Copier</div>
        <div class="context-item" data-action="paste">ğŸ“„ Coller</div>
        <div class="context-item" data-action="duplicate">ğŸ”„ Dupliquer</div>
        <div class="context-separator"></div>
        <div class="context-item" data-action="bring-front">â¬†ï¸ Premier plan</div>
        <div class="context-item" data-action="send-back">â¬‡ï¸ ArriÃ¨re plan</div>
        <div class="context-separator"></div>
        <div class="context-item" data-action="group">ğŸ—‚ï¸ Grouper</div>
        <div class="context-item" data-action="ungroup">ğŸ“‚ DÃ©grouper</div>
        <div class="context-separator"></div>
        <div class="context-item" data-action="properties">âš™ï¸ PropriÃ©tÃ©s</div>
        <div class="context-item" data-action="delete">ğŸ—‘ï¸ Supprimer</div>
    </div>

    <!-- Scripts dans l'ordre de dÃ©pendance -->
    <script src="utils.js"></script>
    <script src="objects.js"></script>
    <script src="canvas.js"></script>
    <script src="tools.js"></script>
    <script src="ui.js"></script>
    <script src="history.js"></script>
    <script src="layers.js"></script>
    <script src="shortcuts.js"></script>
    <script src="core.js"></script>
</body>
</html>